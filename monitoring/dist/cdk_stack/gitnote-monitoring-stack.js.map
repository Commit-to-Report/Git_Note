{"version":3,"file":"gitnote-monitoring-stack.js","sourceRoot":"","sources":["../../cdk_stack/gitnote-monitoring-stack.ts"],"names":[],"mappings":"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","sourcesContent":["// cdk_stack/gitnote-monitoring-stack.ts\nimport * as cdk from 'aws-cdk-lib';\nimport * as lambda from 'aws-cdk-lib/aws-lambda';\nimport * as apigateway from 'aws-cdk-lib/aws-apigateway';\nimport * as iam from 'aws-cdk-lib/aws-iam';\nimport * as s3 from 'aws-cdk-lib/aws-s3';\nimport * as s3deploy from 'aws-cdk-lib/aws-s3-deployment';\nimport * as cloudfront from 'aws-cdk-lib/aws-cloudfront';\nimport * as origins from 'aws-cdk-lib/aws-cloudfront-origins';\nimport * as logs from 'aws-cdk-lib/aws-logs';\nimport { Construct } from 'constructs';\n\n/**\n * GitNote Enterprise Monitoring Stack\n * 완전한 모니터링 인프라를 AWS에 배포\n */\nexport class GitNoteMonitoringStack extends cdk.Stack {\n    constructor(scope: Construct, id: string, props?: cdk.StackProps) {\n        super(scope, id, props);\n\n        // ========================================\n        // 1. Lambda 실행 역할 생성 (최소 권한 원칙)\n        // ========================================\n        \n        const lambdaRole = new iam.Role(this, 'GitNoteMonitoringLambdaRole', {\n            assumedBy: new iam.ServicePrincipal('lambda.amazonaws.com'),\n            description: 'Execution role for GitNote monitoring Lambda functions',\n            managedPolicies: [\n                iam.ManagedPolicy.fromAwsManagedPolicyName('service-role/AWSLambdaBasicExecutionRole')\n            ]\n        });\n\n        // EC2/VPC 읽기 권한\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                'ec2:DescribeVpcs',\n                'ec2:DescribeSubnets',\n                'ec2:DescribeInternetGateways',\n                'ec2:DescribeNatGateways',\n                'ec2:DescribeRouteTables',\n                'ec2:DescribeSecurityGroups',\n                'ec2:DescribeInstances'\n            ],\n            resources: ['*']\n        }));\n\n        // ELB/ALB 읽기 권한\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                'elasticloadbalancing:DescribeLoadBalancers',\n                'elasticloadbalancing:DescribeTargetGroups',\n                'elasticloadbalancing:DescribeTargetHealth',\n                'elasticloadbalancing:DescribeListeners',\n                'elasticloadbalancing:DescribeRules'\n            ],\n            resources: ['*']\n        }));\n\n        // ECS 읽기 권한\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                'ecs:DescribeClusters',\n                'ecs:DescribeServices',\n                'ecs:DescribeTasks',\n                'ecs:ListTasks',\n                'ecs:DescribeTaskDefinition',\n                'ecs:DescribeContainerInstances',\n                'ecs:ListServices'\n            ],\n            resources: ['*']\n        }));\n\n        // S3 읽기 권한 (특정 버킷만)\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                's3:ListBucket',\n                's3:GetBucketLocation',\n                's3:GetBucketVersioning',\n                's3:GetBucketEncryption',\n                's3:GetBucketLifecycleConfiguration',\n                's3:GetBucketLogging',\n                's3:ListBucketVersions'\n            ],\n            resources: [\n                'arn:aws:s3:::gitnote-s3-bucket',\n                'arn:aws:s3:::gitnote-s3-bucket/*'\n            ]\n        }));\n\n        // DynamoDB 읽기 권한 (특정 테이블만)\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                'dynamodb:DescribeTable',\n                'dynamodb:DescribeTimeToLive',\n                'dynamodb:ListTagsOfResource',\n                'dynamodb:DescribeContinuousBackups',\n                'dynamodb:DescribeGlobalTable',\n                'dynamodb:DescribeTableReplicaAutoScaling'\n            ],\n            resources: [\n                `arn:aws:dynamodb:${this.region}:${this.account}:table/UserPreset`,\n                `arn:aws:dynamodb:${this.region}:${this.account}:table/UserReports`\n            ]\n        }));\n\n        // CloudWatch 메트릭 읽기 권한\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                'cloudwatch:GetMetricStatistics',\n                'cloudwatch:GetMetricData',\n                'cloudwatch:ListMetrics',\n                'cloudwatch:DescribeAlarms'\n            ],\n            resources: ['*']\n        }));\n\n        // Cost Explorer 읽기 권한 (선택적)\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                'ce:GetCostAndUsage',\n                'ce:GetCostForecast',\n                'ce:GetDimensionValues',\n                'ce:GetReservationUtilization',\n                'ce:GetSavingsPlansPurchaseRecommendation'\n            ],\n            resources: ['*']\n        }));\n\n        // Secrets Manager 읽기 권한 (특정 시크릿만)\n        lambdaRole.addToPolicy(new iam.PolicyStatement({\n            effect: iam.Effect.ALLOW,\n            actions: [\n                'secretsmanager:DescribeSecret',\n                'secretsmanager:ListSecretVersionIds'\n            ],\n            resources: [\n                `arn:aws:secretsmanager:${this.region}:${this.account}:secret:GitNote/Secrets-*`\n            ]\n        }));\n\n        // ========================================\n        // 2. Lambda 함수 생성\n        // ========================================\n\n        // Lambda Layer (공통 의존성)\n        const dependenciesLayer = new lambda.LayerVersion(this, 'MonitoringDependencies', {\n            code: lambda.Code.fromAsset('lambda_layer'),\n            compatibleRuntimes: [lambda.Runtime.NODEJS_18_X],\n            description: 'Common dependencies for monitoring functions'\n        });\n\n        // Network Status Lambda\n        const networkStatusLambda = new lambda.Function(this, 'NetworkStatusFunction', {\n            runtime: lambda.Runtime.NODEJS_18_X,\n            handler: 'network-status.handler',\n            code: lambda.Code.fromAsset('lambda_functions'),\n            role: lambdaRole,\n            timeout: cdk.Duration.seconds(30),\n            memorySize: 512,\n            environment: {\n                REGION: this.region,\n                NODE_ENV: 'production'\n            },\n            layers: [dependenciesLayer],\n            logRetention: logs.RetentionDays.ONE_WEEK,\n            description: 'Monitor VPC, ALB, and network resources'\n        });\n\n        // Compute Performance Lambda\n        const computePerformanceLambda = new lambda.Function(this, 'ComputePerformanceFunction', {\n            runtime: lambda.Runtime.NODEJS_18_X,\n            handler: 'compute-performance.handler',\n            code: lambda.Code.fromAsset('lambda_functions'),\n            role: lambdaRole,\n            timeout: cdk.Duration.seconds(30),\n            memorySize: 512,\n            environment: {\n                REGION: this.region,\n                NODE_ENV: 'production'\n            },\n            layers: [dependenciesLayer],\n            logRetention: logs.RetentionDays.ONE_WEEK,\n            description: 'Monitor ECS Fargate performance metrics'\n        });\n\n        // Storage Health Lambda\n        const storageHealthLambda = new lambda.Function(this, 'StorageHealthFunction', {\n            runtime: lambda.Runtime.NODEJS_18_X,\n            handler: 'storage-health.handler',\n            code: lambda.Code.fromAsset('lambda_functions'),\n            role: lambdaRole,\n            timeout: cdk.Duration.seconds(30),\n            memorySize: 512,\n            environment: {\n                REGION: this.region,\n                NODE_ENV: 'production'\n            },\n            layers: [dependenciesLayer],\n            logRetention: logs.RetentionDays.ONE_WEEK,\n            description: 'Monitor S3 and DynamoDB health'\n        });\n\n        // Cost Breakdown Lambda\n        const costBreakdownLambda = new lambda.Function(this, 'CostBreakdownFunction', {\n            runtime: lambda.Runtime.NODEJS_18_X,\n            handler: 'cost-breakdown.handler',\n            code: lambda.Code.fromAsset('lambda_functions'),\n            role: lambdaRole,\n            timeout: cdk.Duration.seconds(30),\n            memorySize: 512,\n            environment: {\n                REGION: this.region,\n                ACCOUNT_ID: this.account,\n                NODE_ENV: 'production'\n            },\n            layers: [dependenciesLayer],\n            logRetention: logs.RetentionDays.ONE_WEEK,\n            description: 'Analyze AWS service costs and provide recommendations'\n        });\n\n        // ========================================\n        // 3. API Gateway 설정\n        // ========================================\n\n        const api = new apigateway.RestApi(this, 'GitNoteMonitoringAPI', {\n            restApiName: 'GitNote Monitoring API',\n            description: 'API for GitNote infrastructure monitoring dashboard',\n            deployOptions: {\n                stageName: 'prod',\n                loggingLevel: apigateway.MethodLoggingLevel.INFO,\n                dataTraceEnabled: true,\n                tracingEnabled: true,\n                throttlingBurstLimit: 100,\n                throttlingRateLimit: 50\n            },\n            defaultCorsPreflightOptions: {\n                allowOrigins: apigateway.Cors.ALL_ORIGINS,\n                allowMethods: apigateway.Cors.ALL_METHODS,\n                allowHeaders: [\n                    'Content-Type',\n                    'X-Amz-Date',\n                    'Authorization',\n                    'X-Api-Key',\n                    'X-Amz-Security-Token'\n                ]\n            }\n        });\n\n        // API 엔드포인트 생성\n        const networkStatus = api.root.addResource('network-status');\n        networkStatus.addMethod('GET', new apigateway.LambdaIntegration(networkStatusLambda));\n\n        const computePerformance = api.root.addResource('compute-performance');\n        computePerformance.addMethod('GET', new apigateway.LambdaIntegration(computePerformanceLambda));\n\n        const storageHealth = api.root.addResource('storage-health');\n        storageHealth.addMethod('GET', new apigateway.LambdaIntegration(storageHealthLambda));\n\n        const costBreakdown = api.root.addResource('cost-breakdown');\n        costBreakdown.addMethod('GET', new apigateway.LambdaIntegration(costBreakdownLambda));\n\n        // API Key (선택적)\n        const apiKey = api.addApiKey('GitNoteMonitoringAPIKey', {\n            description: 'API key for GitNote monitoring dashboard',\n            apiKeyName: 'gitnote-monitoring-key'\n        });\n\n        const usagePlan = api.addUsagePlan('GitNoteMonitoringUsagePlan', {\n            name: 'Standard',\n            throttle: {\n                rateLimit: 100,\n                burstLimit: 200\n            },\n            quota: {\n                limit: 10000,\n                period: apigateway.Period.DAY\n            }\n        });\n\n        usagePlan.addApiKey(apiKey);\n        usagePlan.addApiStage({\n            api: api,\n            stage: api.deploymentStage\n        });\n\n        // ========================================\n        // 4. Frontend 호스팅 (S3 + CloudFront)\n        // ========================================\n\n        // S3 버킷 (정적 웹사이트 호스팅)\n        const websiteBucket = new s3.Bucket(this, 'GitNoteMonitoringWebsite', {\n            bucketName: `gitnote-monitoring-${this.account}-${this.region}`,\n            websiteIndexDocument: 'index.html',\n            websiteErrorDocument: 'error.html',\n            publicReadAccess: false,\n            blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,\n            removalPolicy: cdk.RemovalPolicy.DESTROY,\n            autoDeleteObjects: true,\n            cors: [\n                {\n                    allowedMethods: [\n                        s3.HttpMethods.GET,\n                        s3.HttpMethods.HEAD\n                    ],\n                    allowedOrigins: ['*'],\n                    allowedHeaders: ['*']\n                }\n            ]\n        });\n\n        // CloudFront Origin Access Identity\n        const originAccessIdentity = new cloudfront.OriginAccessIdentity(this, 'OAI', {\n            comment: 'OAI for GitNote Monitoring Dashboard'\n        });\n\n        websiteBucket.grantRead(originAccessIdentity);\n\n        // CloudFront Distribution\n        const distribution = new cloudfront.Distribution(this, 'GitNoteMonitoringDistribution', {\n            defaultRootObject: 'index.html',\n            defaultBehavior: {\n                origin: new origins.S3Origin(websiteBucket, {\n                    originAccessIdentity: originAccessIdentity\n                }),\n                viewerProtocolPolicy: cloudfront.ViewerProtocolPolicy.REDIRECT_TO_HTTPS,\n                allowedMethods: cloudfront.AllowedMethods.ALLOW_GET_HEAD,\n                cachePolicy: cloudfront.CachePolicy.CACHING_OPTIMIZED,\n                compress: true\n            },\n            errorResponses: [\n                {\n                    httpStatus: 404,\n                    responseHttpStatus: 200,\n                    responsePagePath: '/index.html',\n                    ttl: cdk.Duration.minutes(5)\n                }\n            ],\n            comment: 'CloudFront distribution for GitNote Monitoring Dashboard',\n            priceClass: cloudfront.PriceClass.PRICE_CLASS_100\n        });\n\n        // S3 배포 (Frontend 파일)\n        new s3deploy.BucketDeployment(this, 'DeployWebsite', {\n            sources: [s3deploy.Source.asset('./frontend')],\n            destinationBucket: websiteBucket,\n            distribution,\n            distributionPaths: ['/*']\n        });\n\n        // ========================================\n        // 5. Outputs\n        // ========================================\n\n        new cdk.CfnOutput(this, 'APIGatewayURL', {\n            value: api.url,\n            description: 'API Gateway endpoint URL',\n            exportName: 'GitNoteMonitoringAPIURL'\n        });\n\n        new cdk.CfnOutput(this, 'APIKey', {\n            value: apiKey.keyId,\n            description: 'API Key ID (retrieve value from console)',\n            exportName: 'GitNoteMonitoringAPIKey'\n        });\n\n        new cdk.CfnOutput(this, 'CloudFrontURL', {\n            value: `https://${distribution.distributionDomainName}`,\n            description: 'CloudFront distribution URL for the monitoring dashboard',\n            exportName: 'GitNoteMonitoringDashboardURL'\n        });\n\n        new cdk.CfnOutput(this, 'S3BucketName', {\n            value: websiteBucket.bucketName,\n            description: 'S3 bucket name for website hosting',\n            exportName: 'GitNoteMonitoringBucket'\n        });\n\n        // Tags\n        cdk.Tags.of(this).add('Project', 'GitNote');\n        cdk.Tags.of(this).add('Component', 'Monitoring');\n        cdk.Tags.of(this).add('Environment', 'Production');\n        cdk.Tags.of(this).add('ManagedBy', 'CDK');\n    }\n}"]}