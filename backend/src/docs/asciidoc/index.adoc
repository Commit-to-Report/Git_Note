= GitNote API Documentation
:doctype: book
:icons: font
:source-highlighter: highlightjs
:highlightjs-theme: github
:toc: left
:toclevels: 3
:sectlinks:
:sectanchors:
:numbered:
:docinfo: shared

++++
<style>
@import url('https://cdn.jsdelivr.net/gh/wanteddev/wanted-sans@v1.0.1/packages/wanted-sans/fonts/webfonts/variable/split/WantedSansVariable.min.css');

/* 전체 페이지 스타일 */
body {
    font-family: "Wanted Sans", -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.6;
    color: #24292e;
}

/* 헤더 스타일 */
#header {
    background: linear-gradient(135deg, #F55600 0%, #ff7733 100%);
    color: white;
    padding: 3rem 2rem;
    border: none;
}

#header h1 {
    color: white;
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
}

/* 목차 스타일 */
#toc {
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    padding: 1.5rem;
}

#toc ul {
    list-style: none;
    padding-left: 0;
}

#toc li {
    margin: 0.5rem 0;
}

#toc a {
    color: #495057;
    text-decoration: none;
    transition: color 0.2s;
}

#toc a:hover {
    color: #F55600;
}

/* 섹션 헤더 */
.sect1 h2 {
    color: #F55600;
    border-bottom: 3px solid #F55600;
    padding-bottom: 0.5rem;
    margin-top: 2rem;
}

.sect2 h3 {
    color: #ff7733;
    margin-top: 1.5rem;
}

/* 테이블 스타일 */
table {
    border-collapse: collapse;
    width: 100%;
    margin: 1rem 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

table thead {
    background: linear-gradient(135deg, #F55600 0%, #ff7733 100%);
    color: white;
}

table thead th {
    padding: 1rem;
    text-align: left;
    font-weight: 600;
}

table tbody td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid #e9ecef;
}

table tbody tr:hover {
    background-color: #f8f9fa;
}

/* 코드 블록 스타일 */
.listingblock {
    margin: 1rem 0;
}

.listingblock pre {
    background: #f6f8fa;
    border: 1px solid #e1e4e8;
    border-radius: 6px;
    padding: 1rem;
    overflow-x: auto;
}

.listingblock .title {
    color: #F55600;
    font-weight: 600;
    margin-bottom: 0.5rem;
}

/* 파라미터 섹션 */
.dlist dt {
    font-weight: 600;
    color: #F55600;
    margin-top: 0.5rem;
}

.dlist dd {
    margin-left: 1.5rem;
    margin-bottom: 0.5rem;
}

/* 인포 박스 */
.admonitionblock {
    margin: 1.5rem 0;
    padding: 1rem;
    border-left: 4px solid #F55600;
    background: #f8f9fa;
    border-radius: 4px;
}

.admonitionblock td.icon {
    color: #F55600;
    font-size: 1.5rem;
}

/* 반응형 디자인 */
@media (max-width: 768px) {
    #header h1 {
        font-size: 1.8rem;
    }

    table {
        font-size: 0.9rem;
    }
}
</style>
++++

[.lead]
GitNote 프로젝트의 REST API 문서입니다. GitHub 저장소와 커밋 정보를 조회하고, AI 기반 보고서를 생성하며, S3 및 DynamoDB를 통해 데이터를 관리할 수 있는 API를 제공합니다.

'''

[[overview]]
== 개요

GitNote는 GitHub 저장소의 커밋 히스토리를 분석하고 AI 기반 보고서를 자동 생성하는 서비스입니다.

=== 주요 기능

* GitHub OAuth 인증 및 사용자 관리
* GitHub 저장소 및 커밋 조회
* S3 기반 커밋 로그 저장 및 관리
* AI(Gemini) 기반 커밋 요약 보고서 생성
* DynamoDB 기반 보고서 저장
* 사용자별 보고서 설정 관리

=== API 엔드포인트

개발: `http://localhost:8080`
운영: `https://d1l3a7dvc3xbrk.cloudfront.net`

=== 인증

대부분의 API는 GitHub OAuth 인증이 필요합니다. 세션 쿠키를 통해 인증 상태를 유지합니다.

[[overview-http-verbs]]
=== HTTP 동사

본 REST API에서 사용하는 HTTP 동사(verbs)는 가능한 한 표준 HTTP와 REST 규약을 따릅니다.

[cols="1,3"]
|===
| 동사 | 용례

| `GET`
| 리소스를 가져올 때 사용

| `POST`
| 새 리소스를 만들 때 사용

| `PUT`
| 기존 리소스를 수정할 때 사용

| `DELETE`
| 기존 리소스를 삭제할 때 사용
|===

[[overview-http-status-codes]]
=== HTTP 상태 코드

[cols="1,3"]
|===
| 상태 코드 | 용례

| `200 OK`
| 요청을 성공적으로 처리함

| `400 Bad Request`
| 잘못된 요청을 보낸 경우

| `401 Unauthorized`
| 인증되지 않은 사용자

| `404 Not Found`
| 요청한 리소스가 없음

| `429 Too Many Requests`
| API 호출 한도 초과

| `500 Internal Server Error`
| 서버 내부 오류
|===

'''

[[resources]]
== API 엔드포인트

[[resources-oauth]]
=== OAuth & 인증 API

GitHub OAuth 인증 및 세션 관리를 위한 API입니다.

[[resources-oauth-client-id]]
==== 클라이언트 ID 조회

GitHub OAuth 인증에 필요한 클라이언트 ID를 조회합니다.

===== 요청

include::{snippets}/git-hub-o-auth-controller-test/get-client-id/http-request.adoc[]

===== 응답

include::{snippets}/git-hub-o-auth-controller-test/get-client-id/http-response.adoc[]

===== 응답 필드

include::{snippets}/git-hub-o-auth-controller-test/get-client-id/response-fields.adoc[]

'''

[[resources-oauth-user-info]]
==== 사용자 정보 조회

GitHub OAuth 인증 코드를 사용하여 사용자 정보를 조회하고 세션을 생성합니다.

===== 요청 파라미터

include::{snippets}/git-hub-o-auth-controller-test/get-user-info/query-parameters.adoc[]

===== 요청

include::{snippets}/git-hub-o-auth-controller-test/get-user-info/http-request.adoc[]

===== 응답

include::{snippets}/git-hub-o-auth-controller-test/get-user-info/http-response.adoc[]

===== 응답 필드

include::{snippets}/git-hub-o-auth-controller-test/get-user-info/response-fields.adoc[]

'''

[[resources-oauth-session]]
==== 세션 확인

현재 로그인된 사용자의 세션 정보를 확인합니다.

===== 요청

include::{snippets}/git-hub-o-auth-controller-test/check-session/http-request.adoc[]

===== 응답

include::{snippets}/git-hub-o-auth-controller-test/check-session/http-response.adoc[]

===== 응답 필드

include::{snippets}/git-hub-o-auth-controller-test/check-session/response-fields.adoc[]

'''

[[resources-oauth-logout]]
==== 로그아웃

현재 세션을 종료하고 GitHub 액세스 토큰을 폐기합니다.

===== 요청

include::{snippets}/git-hub-o-auth-controller-test/logout/http-request.adoc[]

===== 응답

include::{snippets}/git-hub-o-auth-controller-test/logout/http-response.adoc[]

===== 응답 필드

include::{snippets}/git-hub-o-auth-controller-test/logout/response-fields.adoc[]

'''

[[resources-github]]
=== GitHub API

GitHub 저장소와 커밋 정보를 조회하는 API입니다.

[[resources-github-repositories]]
==== 저장소 목록 조회

인증된 사용자의 GitHub 저장소 목록을 조회합니다.

===== 요청

include::{snippets}/commit-controller-test/get-repositories/http-request.adoc[]

===== 응답

include::{snippets}/commit-controller-test/get-repositories/http-response.adoc[]

===== 응답 필드

include::{snippets}/commit-controller-test/get-repositories/response-fields.adoc[]

'''

[[resources-github-commits]]
==== 커밋 목록 조회

특정 저장소의 지정된 기간 동안의 커밋 목록을 조회합니다.

===== 요청 파라미터

include::{snippets}/commit-controller-test/get-commits/query-parameters.adoc[]

===== 요청

include::{snippets}/commit-controller-test/get-commits/http-request.adoc[]

===== 응답

include::{snippets}/commit-controller-test/get-commits/http-response.adoc[]

===== 응답 필드

include::{snippets}/commit-controller-test/get-commits/response-fields.adoc[]

'''

[[resources-github-rate-limit]]
==== API 호출 제한 조회

GitHub API의 현재 호출 제한 정보를 조회합니다.

===== 요청

include::{snippets}/commit-controller-test/get-rate-limit/http-request.adoc[]

===== 응답

include::{snippets}/commit-controller-test/get-rate-limit/http-response.adoc[]

===== 응답 필드

include::{snippets}/commit-controller-test/get-rate-limit/response-fields.adoc[]

'''

[[resources-s3]]
=== S3 스토리지 API

커밋 로그를 S3에 저장하고 관리하는 API입니다.

[[resources-s3-upload]]
==== 커밋 로그 업로드

커밋 로그를 S3에 업로드합니다.

===== 요청 필드

include::{snippets}/s3-controller-test/upload-commit-log/request-fields.adoc[]

===== 요청

include::{snippets}/s3-controller-test/upload-commit-log/http-request.adoc[]

===== 응답

include::{snippets}/s3-controller-test/upload-commit-log/http-response.adoc[]

===== 응답 필드

include::{snippets}/s3-controller-test/upload-commit-log/response-fields.adoc[]

'''

[[resources-s3-list]]
==== 커밋 로그 목록 조회

사용자의 S3에 저장된 커밋 로그 파일 목록을 조회합니다.

===== 요청 파라미터

include::{snippets}/s3-controller-test/get-my-commit-logs/query-parameters.adoc[]

===== 요청

include::{snippets}/s3-controller-test/get-my-commit-logs/http-request.adoc[]

===== 응답

include::{snippets}/s3-controller-test/get-my-commit-logs/http-response.adoc[]

===== 응답 필드

include::{snippets}/s3-controller-test/get-my-commit-logs/response-fields.adoc[]

'''

[[resources-s3-report]]
=== S3 보고서 생성 API

S3에 저장된 커밋 로그를 기반으로 AI 보고서를 생성하는 API입니다.

[[resources-s3-report-generate]]
==== AI 보고서 생성

엔드포인트: `GET /api/s3/report`

S3에 저장된 파일을 읽어 AI 기반 보고서를 생성합니다.

===== 요청 파라미터

[cols="1,1,3"]
|===
|파라미터|타입|설명

|key
|String
|S3에 저장된 파일 키 (경로 포함)

|style
|String
|보고서 생성 스타일 (기본값: summary, 선택사항)
|===

===== 응답 예시

[source,json]
----
{
  "summary": "AI가 생성한 커밋 요약 보고서"
}
----

'''

[[resources-ddb-report]]
=== DynamoDB 보고서 저장 API

생성된 보고서를 DynamoDB에 저장하는 API입니다.

[[resources-ddb-report-save]]
==== 보고서 저장

사용자 보고서를 DynamoDB에 저장합니다.

===== 요청 필드

include::{snippets}/ddb-report-controller-test/save-report/request-fields.adoc[]

===== 요청

include::{snippets}/ddb-report-controller-test/save-report/http-request.adoc[]

===== 응답

include::{snippets}/ddb-report-controller-test/save-report/http-response.adoc[]

===== 응답 필드

include::{snippets}/ddb-report-controller-test/save-report/response-fields.adoc[]

'''

[[resources-user-preset]]
=== 사용자 설정 API

사용자의 보고서 자동 생성 설정을 관리하는 API입니다.

[[resources-user-preset-create-or-update]]
==== 사용자 설정 생성/수정

사용자의 보고서 설정을 생성하거나 수정합니다.

===== 요청 필드

include::{snippets}/user-preset-controller-test/create-or-update-preset/request-fields.adoc[]

===== 요청

include::{snippets}/user-preset-controller-test/create-or-update-preset/http-request.adoc[]

===== 응답

include::{snippets}/user-preset-controller-test/create-or-update-preset/http-response.adoc[]

===== 응답 필드

include::{snippets}/user-preset-controller-test/create-or-update-preset/response-fields.adoc[]

'''

[[resources-user-preset-get]]
==== 사용자 설정 조회

현재 로그인한 사용자의 설정을 조회합니다.

===== 요청

include::{snippets}/user-preset-controller-test/get-preset/http-request.adoc[]

===== 응답

include::{snippets}/user-preset-controller-test/get-preset/http-response.adoc[]

===== 응답 필드

include::{snippets}/user-preset-controller-test/get-preset/response-fields.adoc[]

'''

[[resources-user-preset-delete]]
==== 사용자 설정 삭제

현재 로그인한 사용자의 설정을 삭제합니다.

===== 요청

include::{snippets}/user-preset-controller-test/delete-preset/http-request.adoc[]

===== 응답

include::{snippets}/user-preset-controller-test/delete-preset/http-response.adoc[]

===== 응답 필드

include::{snippets}/user-preset-controller-test/delete-preset/response-fields.adoc[]

'''

[[resources-user-preset-update-email]]
==== 이메일 설정 수정

이메일 주소와 알림 설정을 수정합니다.

===== 요청 필드

include::{snippets}/user-preset-controller-test/update-email-notification/request-fields.adoc[]

===== 요청

include::{snippets}/user-preset-controller-test/update-email-notification/http-request.adoc[]

===== 응답

include::{snippets}/user-preset-controller-test/update-email-notification/http-response.adoc[]

===== 응답 필드

include::{snippets}/user-preset-controller-test/update-email-notification/response-fields.adoc[]

'''

[[resources-user-preset-update-report-style]]
==== 보고서 스타일 수정

보고서 생성 스타일을 수정합니다.

===== 요청 필드

include::{snippets}/user-preset-controller-test/update-report-style/request-fields.adoc[]

===== 요청

include::{snippets}/user-preset-controller-test/update-report-style/http-request.adoc[]

===== 응답

include::{snippets}/user-preset-controller-test/update-report-style/http-response.adoc[]

===== 응답 필드

include::{snippets}/user-preset-controller-test/update-report-style/response-fields.adoc[]

'''

[[resources-user-preset-update-report-frequency]]
==== 보고서 생성 주기 수정

보고서 자동 생성 주기를 수정합니다.

===== 요청 필드

include::{snippets}/user-preset-controller-test/update-report-frequency/request-fields.adoc[]

===== 요청

include::{snippets}/user-preset-controller-test/update-report-frequency/http-request.adoc[]

===== 응답

include::{snippets}/user-preset-controller-test/update-report-frequency/http-response.adoc[]

===== 응답 필드

include::{snippets}/user-preset-controller-test/update-report-frequency/response-fields.adoc[]

'''

[[appendix]]
== 부록

[[appendix-common-errors]]
=== 공통 에러

모든 API는 다음과 같은 형식의 에러 응답을 반환할 수 있습니다:

[source,json]
----
{
  "error": "에러 메시지",
  "needLogin": "true"  // 로그인이 필요한 경우
}
----

[[appendix-authentication]]
=== 인증 흐름

1. GitHub OAuth 로그인: `GET /login/github`
2. 콜백 처리: `GET /oauth/callback?code=...`
3. 세션 쿠키를 통한 API 호출
4. 로그아웃: `GET /logout`

'''

[.text-center]
_Generated with Spring REST Docs_

